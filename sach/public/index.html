<html>
<head>
  <title>视频聚合搜索</title>
  <style>
    /* 添加样式 */
  </style>
</head>
<body>
  <div class="container">
    <div class="search-box">
      <input type="url" id="searchUrl" 
             placeholder="输入搜索模板链接（含{name}）">
      <input type="text" id="keyword" 
             placeholder="输入关键词">
      <button onclick="searchVideos()">搜索</button>
    </div>
    <div id="videoList"></div>
    <div id="player"></div>
  </div>

  <script>
  async function searchVideos() {
    const searchUrl = document.getElementById('searchUrl').value;
    const keyword = document.getElementById('keyword').value;

    try {
      const response = await fetch('/video/search', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ searchUrl, keyword })
      });

      const { success, data, error } = await response.json();
      
      if(success) {
        renderVideoList(data);
      } else {
        alert(`错误：${error}`);
      }
    } catch (err) {
      alert('请求失败');
    }
  }

  function renderVideoList(list) {
    const container = document.getElementById('videoList');
    container.innerHTML = list.map(item => `
      <div class="video-item" onclick="playVideo('${item.url}')">
        <img src="${item.cover}" />
        <h3>${item.title}</h3>
      </div>
    `).join('');
  }

  async function playVideo(url) {
    const player = document.getElementById('player');
    player.innerHTML = `
      <video controls autoplay width="100%">
        <source src="${url}" type="video/mp4">
      </video>
    `;
  }
  </script>
</body>
</html>